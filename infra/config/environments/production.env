# Production Environment Configuration
# CRM Microservices Platform

# Environment
ENVIRONMENT=production
SPRING_PROFILES_ACTIVE=prod

# Service Discovery
EUREKA_INSTANCE_HOSTNAME=discovery-server
EUREKA_INSTANCE_PREFER_IP_ADDRESS=true
EUREKA_CLIENT_SERVICE_URL_DEFAULTZONE=http://discovery-server:8761/eureka
EUREKA_INSTANCE_LEASE_RENEWAL_INTERVAL=30
EUREKA_INSTANCE_LEASE_EXPIRATION_DURATION=90

# Database Configuration
DB_HOST=${DB_HOST}
DB_PORT=5432
DB_NAME=crm_platform
DB_USERNAME=${DB_USERNAME}
DB_PASSWORD=${DB_PASSWORD}
DB_POOL_SIZE=50
DB_CONNECTION_TIMEOUT=30000
DB_IDLE_TIMEOUT=600000
DB_MAX_LIFETIME=1800000
DB_MINIMUM_IDLE=10
DB_MAXIMUM_POOL_SIZE=50

# Redis Configuration
REDIS_HOST=${REDIS_HOST}
REDIS_PORT=6379
REDIS_PASSWORD=${REDIS_PASSWORD}
REDIS_DATABASE=0
REDIS_TIMEOUT=2000
REDIS_POOL_MAX_ACTIVE=32
REDIS_POOL_MAX_IDLE=16
REDIS_POOL_MIN_IDLE=4
REDIS_CLUSTER_ENABLED=true
REDIS_CLUSTER_NODES=${REDIS_CLUSTER_NODES}

# Kafka Configuration
KAFKA_BOOTSTRAP_SERVERS=${KAFKA_BOOTSTRAP_SERVERS}
KAFKA_GROUP_ID=crm-prod
KAFKA_AUTO_OFFSET_RESET=earliest
KAFKA_ENABLE_AUTO_COMMIT=false
KAFKA_SESSION_TIMEOUT=30000
KAFKA_HEARTBEAT_INTERVAL=3000
KAFKA_MAX_POLL_RECORDS=500
KAFKA_SECURITY_PROTOCOL=SASL_SSL
KAFKA_SASL_MECHANISM=PLAIN
KAFKA_SASL_USERNAME=${KAFKA_USERNAME}
KAFKA_SASL_PASSWORD=${KAFKA_PASSWORD}

# RabbitMQ Configuration
RABBITMQ_HOST=${RABBITMQ_HOST}
RABBITMQ_PORT=5672
RABBITMQ_USERNAME=${RABBITMQ_USERNAME}
RABBITMQ_PASSWORD=${RABBITMQ_PASSWORD}
RABBITMQ_VIRTUAL_HOST=/
RABBITMQ_SSL_ENABLED=true
RABBITMQ_CONNECTION_TIMEOUT=60000

# Elasticsearch Configuration
ELASTICSEARCH_HOST=${ELASTICSEARCH_HOST}
ELASTICSEARCH_PORT=9200
ELASTICSEARCH_SCHEME=https
ELASTICSEARCH_USERNAME=${ELASTICSEARCH_USERNAME}
ELASTICSEARCH_PASSWORD=${ELASTICSEARCH_PASSWORD}
ELASTICSEARCH_SSL_ENABLED=true

# Security Configuration
JWT_SECRET=${JWT_SECRET}
JWT_EXPIRATION=3600
JWT_REFRESH_EXPIRATION=86400
CORS_ALLOWED_ORIGINS=${CORS_ALLOWED_ORIGINS}
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Authorization,Content-Type,X-Tenant-ID,X-Request-ID
CORS_ALLOW_CREDENTIALS=true

# API Gateway Configuration
GATEWAY_RATE_LIMIT_ENABLED=true
GATEWAY_RATE_LIMIT_REQUESTS_PER_MINUTE=5000
GATEWAY_CIRCUIT_BREAKER_ENABLED=true
GATEWAY_CIRCUIT_BREAKER_FAILURE_THRESHOLD=50
GATEWAY_CIRCUIT_BREAKER_TIMEOUT=5000
GATEWAY_RETRY_ATTEMPTS=3
GATEWAY_RETRY_DELAY=1000
GATEWAY_TIMEOUT=30000

# Logging Configuration
LOG_LEVEL_ROOT=WARN
LOG_LEVEL_CRM=INFO
LOG_LEVEL_SPRING=WARN
LOG_LEVEL_HIBERNATE=WARN
LOG_FILE_PATH=/app/logs
LOG_FILE_MAX_SIZE=100MB
LOG_FILE_MAX_HISTORY=90
LOG_PATTERN=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level [%X{traceId},%X{spanId}] %logger{36} - %msg%n
LOG_STRUCTURED=true

# Monitoring Configuration
METRICS_ENABLED=true
METRICS_EXPORT_PROMETHEUS=true
TRACING_ENABLED=true
ZIPKIN_BASE_URL=${ZIPKIN_URL}
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s
METRICS_EXPORT_INTERVAL=60s

# Production Features
DEBUG_ENABLED=false
SWAGGER_ENABLED=false
H2_CONSOLE_ENABLED=false
ACTUATOR_ENDPOINTS_ENABLED=true
ACTUATOR_ENDPOINTS_EXPOSURE=health,info,metrics,prometheus
ACTUATOR_SECURITY_ENABLED=true

# File Storage Configuration
FILE_STORAGE_TYPE=s3
FILE_STORAGE_BUCKET=${S3_BUCKET_NAME}
FILE_STORAGE_REGION=${AWS_REGION}
FILE_MAX_SIZE=100MB
FILE_ALLOWED_TYPES=jpg,jpeg,png,pdf,doc,docx,xls,xlsx,csv,zip
AWS_ACCESS_KEY_ID=${AWS_ACCESS_KEY_ID}
AWS_SECRET_ACCESS_KEY=${AWS_SECRET_ACCESS_KEY}

# Email Configuration
EMAIL_ENABLED=true
EMAIL_HOST=${EMAIL_HOST}
EMAIL_PORT=587
EMAIL_USERNAME=${EMAIL_USERNAME}
EMAIL_PASSWORD=${EMAIL_PASSWORD}
EMAIL_FROM=${EMAIL_FROM}
EMAIL_TLS_ENABLED=true
EMAIL_SSL_ENABLED=false
EMAIL_AUTH_ENABLED=true

# Cache Configuration
CACHE_TYPE=redis
CACHE_TTL=3600
CACHE_MAX_SIZE=100000
CACHE_CLUSTER_ENABLED=true
CACHE_COMPRESSION_ENABLED=true

# Performance Configuration
JVM_OPTS=-Xms1024m -Xmx2048m -XX:+UseG1GC -XX:MaxGCPauseMillis=200 -XX:+UseStringDeduplication
CONNECTION_POOL_SIZE=50
THREAD_POOL_SIZE=100
ASYNC_POOL_SIZE=50
SCHEDULER_POOL_SIZE=10

# Feature Flags
FEATURE_ANALYTICS_ENABLED=true
FEATURE_WORKFLOWS_ENABLED=true
FEATURE_CUSTOM_OBJECTS_ENABLED=true
FEATURE_ADVANCED_SEARCH_ENABLED=true
FEATURE_BULK_OPERATIONS_ENABLED=true
FEATURE_BETA_FEATURES_ENABLED=false

# Security Settings
SECURITY_REQUIRE_HTTPS=true
SECURITY_HSTS_ENABLED=true
SECURITY_HSTS_MAX_AGE=31536000
SECURITY_CSRF_ENABLED=true
SECURITY_CONTENT_SECURITY_POLICY=default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'
SECURITY_X_FRAME_OPTIONS=DENY
SECURITY_X_CONTENT_TYPE_OPTIONS=nosniff

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=90
BACKUP_S3_BUCKET=${BACKUP_S3_BUCKET}
BACKUP_ENCRYPTION_ENABLED=true

# Alerting Configuration
ALERTS_ENABLED=true
ALERTS_SLACK_WEBHOOK=${SLACK_WEBHOOK_URL}
ALERTS_EMAIL_RECIPIENTS=${ALERT_EMAIL_RECIPIENTS}
ALERTS_PAGERDUTY_KEY=${PAGERDUTY_INTEGRATION_KEY}

# Compliance Configuration
GDPR_ENABLED=true
AUDIT_ENABLED=true
DATA_RETENTION_DAYS=2555
ENCRYPTION_AT_REST_ENABLED=true
ENCRYPTION_IN_TRANSIT_ENABLED=true

# Scaling Configuration
AUTO_SCALING_ENABLED=true
MIN_REPLICAS=2
MAX_REPLICAS=10
CPU_THRESHOLD=70
MEMORY_THRESHOLD=80

# External Integrations
EXTERNAL_API_TIMEOUT=30000
EXTERNAL_API_RETRY_ATTEMPTS=3
EXTERNAL_API_CIRCUIT_BREAKER_ENABLED=true

# Database Optimization
DB_QUERY_TIMEOUT=30000
DB_SLOW_QUERY_THRESHOLD=5000
DB_CONNECTION_VALIDATION_TIMEOUT=5000
DB_LEAK_DETECTION_THRESHOLD=60000