-- Insert default pipeline and stages for demo purposes
-- Note: In a real implementation, this would be done through the application or tenant setup process

-- Insert a default pipeline (using a fixed UUID for consistency)
INSERT INTO pipelines (id, tenant_id, name, description, is_active, is_default, display_order, created_by, updated_by)
VALUES (
    '00000000-0000-0000-0000-000000000001',
    '00000000-0000-0000-0000-000000000001', -- Default tenant
    'Standard Sales Pipeline',
    'Default sales pipeline with standard stages',
    TRUE,
    TRUE,
    1,
    '00000000-0000-0000-0000-000000000001', -- Default user
    '00000000-0000-0000-0000-000000000001'
);

-- Insert default pipeline stages
INSERT INTO pipeline_stages (id, pipeline_id, name, description, default_probability, is_active, is_closed, is_won, display_order, color, created_by, updated_by)
VALUES 
    ('00000000-0000-0000-0000-000000000011', '00000000-0000-0000-0000-000000000001', 'Prospecting', 'Initial contact and qualification', 10.0, TRUE, FALSE, FALSE, 1, '#E3F2FD', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001'),
    ('00000000-0000-0000-0000-000000000012', '00000000-0000-0000-0000-000000000001', 'Qualification', 'Qualifying the opportunity', 25.0, TRUE, FALSE, FALSE, 2, '#FFF3E0', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001'),
    ('00000000-0000-0000-0000-000000000013', '00000000-0000-0000-0000-000000000001', 'Needs Analysis', 'Understanding customer needs', 40.0, TRUE, FALSE, FALSE, 3, '#F3E5F5', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001'),
    ('00000000-0000-0000-0000-000000000014', '00000000-0000-0000-0000-000000000001', 'Proposal', 'Proposal submitted', 60.0, TRUE, FALSE, FALSE, 4, '#E8F5E8', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001'),
    ('00000000-0000-0000-0000-000000000015', '00000000-0000-0000-0000-000000000001', 'Negotiation', 'Negotiating terms', 80.0, TRUE, FALSE, FALSE, 5, '#FFF8E1', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001'),
    ('00000000-0000-0000-0000-000000000016', '00000000-0000-0000-0000-000000000001', 'Closed Won', 'Deal successfully closed', 100.0, TRUE, TRUE, TRUE, 6, '#E8F5E8', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001'),
    ('00000000-0000-0000-0000-000000000017', '00000000-0000-0000-0000-000000000001', 'Closed Lost', 'Deal lost', 0.0, TRUE, TRUE, FALSE, 7, '#FFEBEE', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001');

-- Add some sample deals for testing
INSERT INTO deals (id, tenant_id, pipeline_id, stage_id, name, amount, currency, probability, expected_close_date, deal_type, lead_source, description, owner_id, created_by, updated_by)
VALUES 
    ('00000000-0000-0000-0000-000000000021', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000013', 'Acme Corp Software License', 50000.00, 'USD', 40.0, '2025-03-15', 'new_business', 'Website', 'Enterprise software licensing deal', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001'),
    ('00000000-0000-0000-0000-000000000022', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000014', 'TechStart Consulting Services', 25000.00, 'USD', 60.0, '2025-02-28', 'new_business', 'Referral', 'Consulting services for startup', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001'),
    ('00000000-0000-0000-0000-000000000023', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000015', 'Global Inc Implementation', 100000.00, 'USD', 80.0, '2025-04-30', 'existing_business', 'Existing Customer', 'System implementation project', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001');

-- Insert initial stage history for sample deals
INSERT INTO deal_stage_history (deal_id, from_stage_id, to_stage_id, pipeline_id, changed_by, reason)
VALUES 
    ('00000000-0000-0000-0000-000000000021', NULL, '00000000-0000-0000-0000-000000000013', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', 'Deal created'),
    ('00000000-0000-0000-0000-000000000022', NULL, '00000000-0000-0000-0000-000000000014', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', 'Deal created'),
    ('00000000-0000-0000-0000-000000000023', NULL, '00000000-0000-0000-0000-000000000015', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', 'Deal created');